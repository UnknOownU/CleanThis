{% extends '@EasyAdmin/layout.html.twig' %}

{% block body_id 'page-content-wrapper' %}

{% block main %}
<section class="content-body">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="user-info mb-4 p-5 bg-white shadow rounded" id="profile-info">
                <h2 class="h4 text-primary mb-4">Informations du Profil</h2>
                <p><strong>Email:</strong> {{ user.email }}</p>
                <p><strong>Nom:</strong> {{ user.name }}</p>
                <p><strong>Prénom:</strong> {{ user.firstname }}</p>
                <p><strong>Code Postal:</strong> {{ user.zipcode }}</p>
                <p><strong>Ville:</strong> {{ user.city }}</p>
                <p><strong>Rue:</strong> {{ user.street }}</p>
                <p><strong>Téléphone:</strong> {{ user.phone }}</p>
                <button class="btn btn-outline-primary" onclick="toggleEditForm()">Modifier</button>
            </div>
            
            <div class="edit-form d-none p-5 bg-white shadow rounded" id="profile-edit-form" style="transition: all 0.5s ease-in-out;">
                {{ form_start(form) }}
                <h2 class="h4 text-primary mb-4">Éditer le Profil</h2>
                {{ form_row(form.email, {'attr': {'class': 'form-control mb-3'}}) }}
                {{ form_row(form.name, {'attr': {'class': 'form-control mb-3'}}) }}
                {{ form_row(form.firstname, {'attr': {'class': 'form-control mb-3'}}) }}
                {{ form_row(form.zipcode, {'attr': {'class': 'form-control mb-3'}}) }}
                {{ form_row(form.city, {'attr': {'class': 'form-control mb-3'}}) }}
                {{ form_row(form.street, {'attr': {'class': 'form-control mb-3'}}) }}
                {{ form_row(form.phone, {'attr': {'class': 'form-control mb-3'}}) }}
                {{ form_row(form.newPassword.first, {'attr': {'class': 'form-control mb-3'}}) }}
                {{ form_row(form.newPassword.second, {'attr': {'class': 'form-control mb-3'}}) }}
                <div class="form-group mt-4">
                    <button type="submit" class="btn btn-success">Sauvegarder</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleEditForm()">Annuler</button>
                </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
</section>

<script>
    function toggleEditForm() {
        let info = document.getElementById('profile-info');
        let form = document.getElementById('profile-edit-form');
        
        if (info.style.display === 'none') {
            info.style.display = 'block';
            form.style.display = 'none';
            form.classList.add('d-none');
        } else {
            info.style.display = 'none';
            form.style.display = 'block';
            form.classList.remove('d-none');
        }
    }
</script>
{% endblock %}
